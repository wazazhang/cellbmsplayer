<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" width="240" height="222" borderStyle="solid" cornerRadius="10" backgroundColor="#FEFEFE" backgroundAlpha="0.8">
	
	<mx:Script>
		<![CDATA[
			import Class.Server;
			
			import com.fc.lami.Messages.GameOverNotify;
			import com.fc.lami.Messages.PlayerData;
			import com.fc.lami.Messages.ResultPak;
			
			private var gmovn:GameOverNotify;
			[Bindable]
			private var tip:String
			public function setRes(gmovn:GameOverNotify):void
			{
				switch(gmovn.game_over_type)
				{
					case GameOverNotify.GAME_OVER_TYPE_CARD_OVER :tip="结束方式:牌堆的牌摸空了";break
					case GameOverNotify.GAME_OVER_TYPE_CLEAR :tip="结束方式:有人出完牌";break
					case GameOverNotify.GAME_OVER_TYPE_ESCAPE :tip="结束方式:有人逃跑或则断线";break
				}
				var i:int = 0;
			    for each(var result:ResultPak in  gmovn.result_pak)
				{
					if(result == null)
						continue;
					
				    var player:PlayerData = Server.getPlayer(result.player_id);
					
					var label:Label =  new Label();
					
					label.text = player.name+":"
					label.text +=" "+result.point;
					
					if(result.is_win)
						label.text +=" 胜利";
					else
						label.text +=" 失败";
					
					label.x = 20
					label.y = 60+i*25;
					
					addChild(label);
					
					i++;
				}
				
			}
			
			
			public function close():void
			{
				parent.removeChild(this);
			}
			
		]]>
	</mx:Script>
	
	
	<mx:Label y="10" text="游戏结束" horizontalCenter="0" fontSize="16" fontWeight="bold"/>
	<mx:Label  y="40" text="{tip}" horizontalCenter="0" fontSize="12"/>
	<mx:Button y="188" label="关闭" horizontalCenter="0" click="close()"/>
	
</mx:Canvas>
